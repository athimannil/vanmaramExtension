var consonants={"\u0d15":"\u0d15","\u0d16":"\u0d16","\u0d17":"\u0d17","\u0d18":"\u0d18","\u0d19":"\u0d19","\u0d1a":"\u0d1a","\u0d1b":"\u0d1b","\u0d1c":"\u0d1c","\u0d1d":"\u0d1d","\u0d1e":"\u0d1e","\u0d1f":"\u0d1f","\u0d20":"\u0d20","\u0d21":"\u0d21","\u0d22":"\u0d22","\u0d23":"\u0d23","\u0d24":"\u0d24","\u0d25":"\u0d25","\u0d26":"\u0d26","\u0d27":"\u0d27","\u0d28":"\u0d28","\u0d2a":"\u0d2a","\u0d2b":"\u0d2b","\u0d2c":"\u0d2c","\u0d2d":"\u0d2d","\u0d2e":"\u0d2e","\u0d2f":"\u0d2f","\u0d30":"\u0d30",
"\u0d32":"\u0d32","\u0d35":"\u0d35","\u0d36":"\u0d36","\u0d37":"\u0d37","\u0d38":"\u0d38","\u0d39":"\u0d39","\u0d33":"\u0d33","\u0d34":"\u0d34","\u0d31":"\u0d31","\u0d31\u0d4d\u0d31":"\u0d31\u0d4d\u0d31"};var chillaksharam={"\u0d23\u0d4d\u200d":"\u0d23","\u0d28\u0d4d\u200d":"\u0d28","\u0d02":"\u0d2e","\u0d30\u0d4d\u200d":"\u0d30","\u0d32\u0d4d\u200d":"\u0d32","\u0d33\u0d4d\u200d":"\u0d33","\u0d4d\\u200D":""};var vowels='"\u0d4da":"","\u0d4de":"\u0d46","\u0d4di":"\u0d3f","\u0d4do":"\u0d4a","\u0d4du":"\u0d41","\u0d4dA":"\u0d3e","\u0d4dE":"\u0d47","\u0d4dI":"\u0d40","\u0d4dO":"\u0d4b","\u0d4dU":"\u0d42","\u0d4dY":"\u0d48","\u0d46e":"\u0d40","\u0d4ao":"\u0d42","\u0d3fi":"\u0d40","\u0d3fe":"\u0d40","\u0d41u":"\u0d42","\u0d41o":"\u0d42","\u0d4dr":"\u0d4d\u0d30\u0d4d",';
var roman='"k":"\u0d15\u0d4d","\u0d15\u0d4dh":"\u0d16\u0d4d","g":"\u0d17\u0d4d","\u0d17\u0d4dh":"\u0d18\u0d4d","\u0d28\u0d4d\u200dg":"\u0d19\u0d4d","c":"\u0d15\u0d4d\\u200D","\u0d15\u0d4d\\u200Dh":"\u0d1a\u0d4d","\u0d1a\u0d4dh":"\u0d1b\u0d4d","j":"\u0d1c\u0d4d","\u0d1c\u0d4dh":"\u0d1d\u0d4d","\u0d28\u0d4d\u200dj":"\u0d1e\u0d4d","\u0d28\u0d4d\u200dh":"\u0d1e\u0d4d","T":"\u0d1f\u0d4d","\u0d1f\u0d4dh":"\u0d20\u0d4d","D":"\u0d21\u0d4d","\u0d21\u0d4dh":"\u0d22\u0d4d","\u0d31\u0d4d\u0d31\u0d4dh":"\u0d24\u0d4d","\u0d24\u0d4dh":"\u0d25\u0d4d","d":"\u0d26\u0d4d","\u0d26\u0d4dh":"\u0d27\u0d4d","p":"\u0d2a\u0d4d","\u0d2a\u0d4dh":"\u0d2b\u0d4d","f":"\u0d2b\u0d4d","b":"\u0d2c\u0d4d","\u0d2c\u0d4dh":"\u0d2d\u0d4d","y":"\u0d2f\u0d4d","v":"\u0d35\u0d4d","w":"\u0d35\u0d4d","z":"\u0d36\u0d4d","S":"\u0d36\u0d4d","\u0d38\u0d4dh":"\u0d37\u0d4d","s":"\u0d38\u0d4d","h":"\u0d39\u0d4d","\u0d36\u0d4dh":"\u0d34\u0d4d","x":"\u0d15\u0d4d\u0d37\u0d4d","R":"\u0d31\u0d4d","t":"\u0d31\u0d4d\u0d31\u0d4d",';
var chill='"N":"\u0d23\u0d4d\u200d","n":"\u0d28\u0d4d\u200d","m":"\u0d02","r":"\u0d30\u0d4d\u200d","l":"\u0d32\u0d4d\u200d","L":"\u0d33\u0d4d\u200d",';var swaram='"a":"\u0d05","\u0d05a":"\u0d06","A":"\u0d06","e":"\u0d0e","E":"\u0d0f","\u0d0ee":"\u0d08","i":"\u0d07","\u0d07i":"\u0d08","\u0d07e":"\u0d08","\u0d05i":"\u0d10","I":"\u0d10","o":"\u0d12","\u0d12o":"\u0d0a","O":"\u0d13","\u0d05u":"\u0d14","\u0d12u":"\u0d14","u":"\u0d09","\u0d09u":"\u0d0a","U":"\u0d0a","H":"\u0d03","\u0d31\u0d4dh":"\u0d0b","\u0d30\u0d4d\u200d^":"\u0d0b","\u0d0b^":"\u0d60","\u0d32\u0d4d\u200d^":"\u0d0c","\u0d0c^":"\u0d61",';
var numerals='"1":"\u0d67","2":"\u0d68","3":"\u0d69","4":"\u0d6a","5":"\u0d6b","6":"\u0d6c","7":"\u0d6d","8":"\u0d6e","9":"\u0d6f","0":"\u0d66",';var conjuncts='"\u0d28\u0d4d\u200dt":"\u0d28\u0d4d\u0d31\u0d4d","\u0d28\u0d4d\u0d31\u0d4dh":"\u0d28\u0d4d\u0d24\u0d4d","\u0d28\u0d4d\u200dk":"\u0d19\u0d4d\u0d15\u0d4d","\u0d28\u0d4d\u200dn":"\u0d28\u0d4d\u0d28\u0d4d","\u0d23\u0d4d\u200dN":"\u0d23\u0d4d\u0d23\u0d4d","\u0d33\u0d4d\u200dL":"\u0d33\u0d4d\u0d33\u0d4d","\u0d32\u0d4d\u200dl":"\u0d32\u0d4d\u0d32\u0d4d","\u0d02m":"\u0d2e\u0d4d\u0d2e\u0d4d","\u0d28\u0d4d\u200dm":"\u0d28\u0d4d\u0d2e\u0d4d","\u0d28\u0d4d\u0d28\u0d4dg":"\u0d19\u0d4d\u0d19\u0d4d","\u0d28\u0d4d\u200dd":"\u0d28\u0d4d\u0d26\u0d4d","\u0d23\u0d4d\u200dm":"\u0d23\u0d4d\u0d2e\u0d4d","\u0d32\u0d4d\u200dp":"\u0d32\u0d4d\u0d2a\u0d4d","\u0d02p":"\u0d2e\u0d4d\u0d2a\u0d4d","\u0d31\u0d4d\u0d31\u0d4dt":"\u0d1f\u0d4d\u0d1f\u0d4d","\u0d28\u0d4d\u200dT":"\u0d23\u0d4d\u0d1f\u0d4d","\u0d23\u0d4d\u200dT":"\u0d23\u0d4d\u0d1f\u0d4d","\u0d4d\u0d30\u0d4d^":"\u0d43","\u0d28\u0d4d\u200dc":"\u0d28\u0d4d\u200d\\u200D","\u0d28\u0d4d\u200d\\u200Dh":"\u0d1e\u0d4d\u0d1a\u0d4d","\u0d23\u0d4d\u200dD":"\u0d23\u0d4d\u0d21\u0d4d",';
var others='"\u0d4dL":"\u0d4d\u0d32\u0d4d","~":"\u0d4d\\u200C","\u0d4d~":"\u0d4d\\u200C","\\u200C~":"\\u200C","\u0d02~":"\u0d2e\u0d4d","\u0d15\u0d4d\\u200Dc":"\u0d15\u0d4d\u0d15\u0d4d\\u200D","\u0d15\u0d4d\u0d15\u0d4d\\u200Dh":"\u0d1a\u0d4d\u0d1a\u0d4d","q":"\u0d15\u0d4d\u0d2f\u0d42",';var caps='"B":"\u0d2c\u0d4d\u0d2c\u0d4d","C":"\u0d15\u0d4d\u0d15\u0d4d\\u200D","F":"\u0d2b\u0d4d","G":"\u0d17\u0d4d\u0d17\u0d4d","J":"\u0d1c\u0d4d\u0d1c\u0d4d","K":"\u0d15\u0d4d\u0d15\u0d4d","M":"\u0d2e\u0d4d\u0d2e\u0d4d","P":"\u0d2a\u0d4d\u0d2a\u0d4d","Q":"\u0d15\u0d4d\u0d2f\u0d42","V":"\u0d35\u0d4d\u0d35\u0d4d","W":"\u0d35\u0d4d\u0d35\u0d4d","X":"\u0d15\u0d4d\u0d37\u0d4d","Y":"\u0d2f\u0d4d\u0d2f\u0d4d","Z":"\u0d36\u0d4d\u0d36\u0d4d",';
var ZWNJ='"_":"\\u200C"';function cyr_translit(src){return to_cyrillic(src)}var conversionHash=undefined;var maxcyrlength=0;
function getConversionHash(){if(conversionHash==undefined){var opr="{"+vowels+roman+chill+swaram+numerals+conjuncts+caps+others;for(var consonant in consonants){opr+='"'+consonant+'a":"'+consonant+'\u0d3e",';opr+='"'+consonant+'e":"'+consonant+'\u0d47",';opr+='"'+consonant+'i":"'+consonant+'\u0d48",';opr+='"'+consonant+'o":"'+consonant+'\u0d4b",';opr+='"'+consonant+'u":"'+consonant+'\u0d57",'}for(var chk in chillaksharam){opr+='"'+chk+'a":"'+chillaksharam[chk]+'",';opr+='"'+chk+'e":"'+chillaksharam[chk]+
'\u0d46",';opr+='"'+chk+'i":"'+chillaksharam[chk]+'\u0d3f",';opr+='"'+chk+'o":"'+chillaksharam[chk]+'\u0d4a",';opr+='"'+chk+'u":"'+chillaksharam[chk]+'\u0d41",';opr+='"'+chk+'A":"'+chillaksharam[chk]+'\u0d3e",';opr+='"'+chk+'E":"'+chillaksharam[chk]+'\u0d47",';opr+='"'+chk+'I":"'+chillaksharam[chk]+'\u0d40",';opr+='"'+chk+'O":"'+chillaksharam[chk]+'\u0d4b",';opr+='"'+chk+'U":"'+chillaksharam[chk]+'\u0d42",';opr+='"'+chk+'Y":"'+chillaksharam[chk]+'\u0d48",';opr+='"'+chk+'r":"'+chillaksharam[chk]+'\u0d4d\u0d30\u0d4d",';
opr+='"'+chk+'y":"'+chillaksharam[chk]+'\u0d4d\u0d2f\u0d4d",';opr+='"'+chk+'v":"'+chillaksharam[chk]+'\u0d4d\u0d35\u0d4d",';opr+='"'+chk+'w":"'+chillaksharam[chk]+'\u0d4d\u0d35\u0d4d",';opr+='"'+chk+'~":"'+chillaksharam[chk]+'\u0d4d\\u200C",'}opr+=ZWNJ+"}";conversionHash=eval("("+opr+")");maxcyrlength=6}return conversionHash}
function to_cyrillic(src,output,chunks){if(src==undefined||(src==""||src==null))return src;if(output==undefined)output=new String;var hash=getConversionHash();var location=0;while(location<src.length){var len=Math.min(maxcyrlength,src.length-location);var arr=undefined;var sub;while(len>0){sub=src.substr(location,len);arr=hash[sub];if(arr!=undefined)break;else len--}if(chunks!=undefined)chunks[chunks.length]=sub;if(arr==undefined){output+=sub;location++}else{var newChar=arr;if(sub.toLowerCase()==
sub.toUpperCase()&&(arr.length>1&&(arr[1]&&newChar.toUpperCase()!=newChar.toLowerCase()))){var prevCh=output.length==0?null:output.substr(output.length-1,1);var prevDud=!prevCh||!getTranslitString(prevCh);var prevCap=!prevDud&&prevCh==prevCh.toUpperCase();if(prevDud||!prevCap){output+=newChar.toLowerCase();prevCap=false}else{var next=" ";if(location+len<src.length)next=src.substr(location+len,1);if(next!=next.toUpperCase()&&next==next.toLowerCase())output+=newChar.toLowerCase();else if(next==next.toUpperCase()&&
next!=next.toLowerCase())output+=newChar.toUpperCase();else{var pprevCh=output.length==1?null:output.substr(output.length-2,1);var pprevDud=!pprevCh||!getTranslitString(pprevCh);if(!pprevDud&&pprevCh==pprevCh.toUpperCase())output+=newChar.toUpperCase();else output+=newChar.toLowerCase()}}}else if(sub.toLowerCase()==sub.toUpperCase()&&(arr.length<2||!arr[1]))output+=newChar;else if(sub!=sub.toLowerCase())output+=newChar.toUpperCase();else output+=newChar.toLowerCase();location+=len}}return output}
function convertIt(src,converter){var resultbuffer="";for(var i=0;i<src.length;i++)resultbuffer=converter(resultbuffer+src[i]);return converter(resultbuffer)}var translitHash=undefined;function initTranslit(){if(translitHash==undefined){translitHash=new Array;for(var i=0;i<conversionHash.length;i++){var ch=conversionHash[i][1];if(conversionHash[i][0].toUpperCase()!=conversionHash[i][0].toLowerCase())ch=ch.toUpperCase();if(translitHash[ch]==undefined)translitHash[ch]=conversionHash[i][0]}}}
function replaceValue(node,value,stepback){if(stepback==undefined)stepback=0;if(isExplorer()){var range=document.selection.createRange();range.moveStart("character",-stepback);range.text=value;range.collapse(false);range.select()}else{var scrollTop=node.scrollTop;var cursorLoc=node.selectionStart;node.value=node.value.substring(0,node.selectionStart-stepback)+value+node.value.substring(node.selectionEnd,node.value.length);node.scrollTop=scrollTop;node.selectionStart=cursorLoc+value.length-stepback;
node.selectionEnd=cursorLoc+value.length-stepback}}function positionIsEqual(other){if(isExplorer())return this.position.isEqual(other.position);else return this.position==other.position}function Position(node){if(node.selectionStart!=undefined)this.position=node.selectionStart;else if(document.selection&&document.selection.createRange())this.position=document.selection.createRange();this.isEqual=positionIsEqual}
function resetState(){this.position=new Position(this.node);this.transBuffer="";this.cyrBuffer=""}function StateObject(node){this.node=node;this.reset=resetState;this.cyrBuffer="";this.transBuffer="";this.position=new Position(node)}var stateHash=new Array;function isExplorer(){return document.selection!=undefined&&document.selection.createRange().isEqual!=undefined}function pressedKey(event){if(isExplorer())return event.keyCode;else return event.which}
function transliterateKey(event){if(event==undefined)event=window.event;var node=null;if(event.target)node=event.target;else if(event.srcElement)node=event.srcElement;var state=stateHash[node];if(state==null){state=new StateObject(node);stateHash[node]=state}if(pressedKey(event)>20&&(!event.ctrlKey&&(!event.altKey&&!event.metaKey))){var c=String.fromCharCode(pressedKey(event));var result=process_translit(state,c);if(c!=result.out||result.replace!=0){if(isExplorer())event.returnValue=false;else event.preventDefault();
replaceValue(node,result.out,result.replace);state.position=new Position(node)}}}function TranslitResult(){this.out="";this.replace=0}
function process_translit(state,c){if(!state.position.isEqual(new Position(state.node)))state.reset();var result=new TranslitResult;var backbuffer=getBackBuffer(state.node,state.cyrBuffer.length,2);var chunks=new Array;state.transBuffer=state.transBuffer+c;var str=to_cyrillic(state.cyrBuffer+c,backbuffer,chunks);str=str.substr(backbuffer.length);result.out=str;for(var i=0;i<Math.min(state.cyrBuffer.length,result.out.length);i++)if(state.cyrBuffer.substr(i,1)!=result.out.substr(i,1)){result.replace=
state.cyrBuffer.length-i;result.out=result.out.substr(i);break}if(result.replace==0){if(result.out.length<state.cyrBuffer.length)result.replace=state.cyrBuffer.length-result.out.length;result.out=result.out.substr(Math.min(state.cyrBuffer.length,result.out.length))}if(chunks.length>0&&chunks[chunks.length-1]==result.out.substr(result.out.length-1))state.reset();else{while(state.transBuffer.length>maxcyrlength){state.transBuffer=state.transBuffer.substr(chunks[0].length);chunks.shift();str=str.substr(1)}state.cyrBuffer=
str}return result}function getBackBuffer(node,offset,count){if(isExplorer()){var range=document.selection.createRange();range.moveStart("character",-offset);var result=range.text.substr(-count);if(!result)result="";return result}else return node.value.substring(0,node.selectionStart-offset).substr(-count)}
function getSelectedNode(){if(document.activeElement)return document.activeElement;else if(window.getSelection&&(window.getSelection()&&window.getSelection().rangeCount>0)){var range=window.getSelection().getRangeAt(0);if(range.startContainer&&(range.startContainer.childNodes&&range.startContainer.childNodes.length>range.startOffset))return range.startContainer.childNodes[range.startOffset]}return null}
function toggleCyrMode(){var node=getSelectedNode();if(node)if(stateHash[node]){if(removeKeyEventListener(node))delete stateHash[node]}else if(addKeyEventListener(node))stateHash[node]=new StateObject(node)}function addKeyEventListener(node){if(node.addEventListener)node.addEventListener("keypress",transliterateKey,false);else if(node.attachEvent)node.attachEvent("onkeypress",transliterateKey);else return false;return true}
function removeKeyEventListener(node){if(node.removeEventListener)node.removeEventListener("keypress",transliterateKey,false);else if(node.detachEvent)node.detachEvent("onkeypress",transliterateKey);else return false;return true}
function getSelectedText(){if(isExplorer())return document.selection.createRange().text;else{var node=getSelectedNode();if(node&&(node.value&&(node.selectionStart!=undefined&&node.selectionEnd!=undefined)))return node.value.substring(node.selectionStart,node.selectionEnd)}return""};